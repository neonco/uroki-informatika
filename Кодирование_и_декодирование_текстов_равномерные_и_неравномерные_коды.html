<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Кодирование и декодирование текстов — равномерные и неравномерные коды</title>
    <meta name="description" content="Сценарий видеоурока (7–11 минут), конспект и задачи: равномерные/неравномерные коды, уникальная декодируемость, префиксные коды, неравенство Крафта—Макмиллана, идея Хаффмана." />
    <link rel="stylesheet" href="print.css" media="print" />
    <style>
      :root {
        --bg: #0f172a;
        --panel: #111827;
        --muted: #9ca3af;
        --text: #e5e7eb;
        --accent: #60a5fa;
        --accent-2: #34d399;
        --danger: #f87171;
        --card: #111827;
        --card-border: #1f2937;
        --code-bg: #0b1220;
        --kbd-bg: #0b1220;
      }

      [data-theme="light"] {
        --bg: #f8fafc;
        --panel: #ffffff;
        --muted: #475569;
        --text: #0f172a;
        --accent: #2563eb;
        --accent-2: #059669;
        --danger: #dc2626;
        --card: #ffffff;
        --card-border: #e5e7eb;
        --code-bg: #f1f5f9;
        --kbd-bg: #e2e8f0;
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: radial-gradient(1200px 800px at 10% -10%, rgba(96,165,250,.08), transparent 60%),
                    radial-gradient(1000px 600px at 110% 10%, rgba(52,211,153,.08), transparent 60%),
                    var(--bg);
        color: var(--text);
        line-height: 1.6;
        color-scheme: dark;
      }
      [data-theme="light"] body {
        background: radial-gradient(1200px 800px at 10% -10%, rgba(37,99,235,.07), transparent 60%),
                    radial-gradient(1000px 600px at 110% 10%, rgba(5,150,105,.07), transparent 60%),
                    var(--bg);
        color-scheme: light;
      }

      .container { width: 100%; max-width: 1000px; margin: 0 auto; padding: 24px; }
      header.hero { display: grid; gap: 12px; margin-bottom: 20px; }
      .badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; background: rgba(96,165,250,.12); color: var(--accent); border: 1px solid rgba(96,165,250,.3); border-radius: 999px; font-size: 12px; letter-spacing: .02em; }
      h1 { margin: 0; font-size: 32px; line-height: 1.2; letter-spacing: .2px; }
      .subtitle { color: var(--muted); max-width: 70ch; margin: 0; }

      .toolbar { display: flex; gap: 10px; justify-content: flex-end; align-items: center; margin: 6px 0 12px; }
      .btn { appearance: none; border: 1px solid var(--card-border); background: rgba(255,255,255,.04); color: var(--text); padding: 8px 12px; border-radius: 10px; cursor: pointer; font: inherit; transition: transform .12s ease, background .2s ease, border-color .2s ease, color .2s ease; }
      .btn:hover { transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(96,165,250,.35); }
      .btn-primary { border-color: rgba(96,165,250,.45); color: var(--accent); }
      .btn-ghost { background: transparent; }

      nav.toc { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px; margin: 20px 0 28px; }
      .toc a { display: block; padding: 10px 12px; background: rgba(255,255,255,.02); border: 1px solid var(--card-border); border-radius: 10px; color: var(--text); text-decoration: none; transition: transform .12s ease, background .2s ease, border-color .2s ease; }
      .toc a:hover { transform: translateY(-1px); background: rgba(255,255,255,.04); border-color: rgba(96,165,250,.3); }

      .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
      @media (min-width: 900px) { .grid.two { grid-template-columns: 1.2fr .8fr; } }

      section { scroll-margin-top: 80px; }
      .card { background: var(--card); border: 1px solid var(--card-border); border-radius: 14px; padding: 18px; }
      h2, h3 { margin: 0 0 10px; }
      h2 { font-size: 22px; border-left: 4px solid var(--accent); padding-left: 10px; }
      h3 { font-size: 16px; color: var(--muted); text-transform: uppercase; letter-spacing: .08em; }
      ul { margin: 10px 0 0; padding-left: 20px; } li { margin: 6px 0; }
      .timeline li { margin: 8px 0; }
      .pill { display: inline-block; padding: 2px 8px; margin-right: 6px; border-radius: 999px; font-size: 12px; background: rgba(52,211,153,.12); color: var(--accent-2); border: 1px solid rgba(52,211,153,.35); }
      .note { padding: 10px 12px; background: rgba(96,165,250,.08); border: 1px dashed rgba(96,165,250,.35); border-radius: 10px; color: var(--text); font-size: 14px; }
      .formula, code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background: var(--code-bg); border: 1px solid #0f203a; border-radius: 8px; padding: 2px 6px; font-size: 14px; color: #c7d2fe; }
      .examples-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px; }
      .tag { color: var(--muted); font-size: 13px; }
      footer { margin: 24px 0 8px; color: var(--muted); font-size: 12px; text-align: center; }

      @media print {
        body { background: #ffffff; color: #000; }
        .badge, .toc, .toolbar { display: none; }
        .card { border-color: #ddd; }
        .formula, code { background: #f7f7f7; color: #111; border-color: #eee; }
        h2 { border-left-color: #444; }
      }
    </style>
    <script>
      window.MathJax = {
        tex: { inlineMath: [["\\(", "\\)"], ["$","$"]] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  </head>
  <body>
    <div class="container">
      <header class="hero">
        <span class="badge">Сценарий видео 7–11 минут</span>
        <h1>Кодирование и декодирование текстов. Равномерные и неравномерные коды</h1>
        <p class="subtitle">Равномерные (фиксированной длины) и неравномерные (переменной длины) коды, уникальная декодируемость, префиксные коды, неравенство Крафта—Макмиллана, идея кода Хаффмана.</p>
      </header>

      <div class="toolbar" role="toolbar" aria-label="Быстрые действия">
        <button id="themeToggle" class="btn btn-primary" type="button" aria-pressed="false" aria-label="Переключить тему">Светлая тема</button>
        <button id="printBtn" class="btn btn-ghost" type="button" aria-label="Печать">Печать</button>
      </div>

      <nav class="toc card" aria-label="Содержание">
        <a href="#goals">Цели</a>
        <a href="#script">Сценарий</a>
        <a href="#examples">Быстрые примеры</a>
        <a href="#tasks">Задачи с решениями</a>
        <a href="#quiz">Мини‑викторина</a>
        <a href="#summary">Конспект</a>
        <a href="#homework">Домашнее задание</a>
        <a href="#visuals">Визуальные подсказки</a>
      </nav>

      <main class="grid two">
        <section id="goals" class="card">
          <h2>Цели урока</h2>
          <ul>
            <li>Различать равномерные и неравномерные коды, понимать их назначение.</li>
            <li>Проверять префиксность и уникальную декодируемость кодов.</li>
            <li>Оценивать среднюю длину кода и сравнивать с энтропией.</li>
            <li>Декодировать поток по словарю; понимать идею кода Хаффмана.</li>
          </ul>
        </section>

        <section id="script" class="card">
          <h2>Сценарий видео (7–11 минут)</h2>
          <ul class="timeline">
            <li>
              <span class="pill">0:00–0:40</span>
              Мотивация: почему одинаково кодировать не всегда выгодно; частые буквы vs редкие.
            </li>
            <li>
              <span class="pill">0:40–3:00</span>
              Базовые определения
              <ul>
                <li><strong>Равномерный код</strong> — фиксированная длина слова: <span class="formula">m = ⌈log<sub>2</sub> N⌉</span>.</li>
                <li><strong>Неравномерный код</strong> — переменная длина, выгодно для частотных символов.</li>
                <li><strong>Префиксный код</strong> — ни одно слово не является префиксом другого → мгновенная декодировка.</li>
                <li><strong>Крафт—Макмиллан</strong>: для префиксного кода <span class="formula">\(\sum 2^{-l_i} \le 1\)</span>.</li>
                <li><strong>Средняя длина</strong>: <span class="formula">L_{avg} = \sum p_i\, l_i</span>; нижняя граница <span class="formula">H(X) \le L_{avg} &lt; H(X)+1</span> для Хаффмана.</li>
              </ul>
            </li>
            <li>
              <span class="pill">3:00–5:30</span>
              Префиксность и декодирование
              <ul>
                <li>Как выявить конфликт: префикс, двусмысленность при декодировании.</li>
                <li>Алгоритм декодирования: идти по дереву; при листе — выводить символ.</li>
              </ul>
            </li>
            <li>
              <span class="pill">5:30–7:30</span>
              Идея Хаффмана (интуитивно)
              <ul>
                <li>Сливаем две наименее вероятные вершины, строим дерево, назначаем 0/1 по ребрам.</li>
                <li>Выигрыш: частым — короткие коды, редким — длинные.</li>
              </ul>
            </li>
          </ul>
        </section>

        <section id="examples" class="card">
          <h2>Быстрые примеры</h2>
          <div class="examples-grid">
            <div class="card">
              <h3>Пример 1: Равномерный код</h3>
              <div class="tag">N = 40 символов → m = ⌈log<sub>2</sub> 40⌉ = 6 бит</div>
              <p>Сообщение 200 символов: <span class="formula">I = 200 × 6 = 1200</span> бит = 150 B.</p>
            </div>
            <div class="card">
              <h3>Пример 2: Неравномерный (префиксный) код</h3>
              <div class="tag">Словарь: A→0, B→10, C→110, D→111</div>
              <p>Строка <code>0110111</code> декодируется как A C D: 0 | 110 | 111.</p>
            </div>
            <div class="card">
              <h3>Пример 3: Крафт—Макмиллан</h3>
              <div class="tag">Длины: 1,2,3,3</div>
              <p>Сумма: <span class="formula">2<sup>-1</sup>+2<sup>-2</sup>+2<sup>-3</sup>+2<sup>-3</sup>=1</span> → возможен префиксный код.</p>
            </div>
          </div>
        </section>

        <section id="tasks" class="card">
          <h2>Закрепление: задачи с подробными решениями</h2>
          <ol>
            <li>
              <p><strong>Равномерный код: объём сообщения</strong></p>
              <p><em>Условие:</em> алфавит 50 символов, длина 180. Найти объём.</p>
              <p><em>Решение:</em> <span class="formula">m = ⌈log<sub>2</sub> 50⌉ = 6</span>; <span class="formula">I = 180×6 = 1080</span> бит = 135 B.</p>
              <p><em>Ответ:</em> 135 B.</p>
            </li>
            <li>
              <p><strong>Проверка префиксности</strong></p>
              <p><em>Условие:</em> A→0, B→01, C→011, D→111. Является ли код префиксным?</p>
              <p><em>Решение:</em> слово B (<code>01</code>) имеет префикс A (<code>0</code>) → <strong>не префиксный</strong>, декодирование неоднозначно.</p>
              <p class="note">Крафт‑сумма может быть ≤1, но префиксность не гарантируется — это лишь необходимое условие для существования префиксного кода с такими длинами.</p>
            </li>
            <li>
              <p><strong>Декодирование по словарю</strong></p>
              <p><em>Условие:</em> A→0, B→10, C→110, D→111. Декодировать <code>01011110110</code>.</p>
              <p><em>Решение:</em> 0 | 10 | 111 | 10 | 110 → A B D B C.</p>
              <p><em>Ответ:</em> A B D B C.</p>
            </li>
            <li>
              <p><strong>Средняя длина и выигрыш</strong></p>
              <p><em>Условие:</em> p(A,B,C,D) = (0.4, 0.3, 0.2, 0.1); код A→0, B→10, C→110, D→111.</p>
              <p><em>Решение:</em> <span class="formula">L_{avg} = 0.4·1 + 0.3·2 + 0.2·3 + 0.1·3 = 1.9</span> бита.</p>
              <p>Равномерный: m = ⌈log<sub>2</sub> 4⌉ = 2 → выигрыш <span class="formula">2 − 1.9 = 0.1</span> б/симв.</p>
            </li>
            <li>
              <p><strong>Идея Хаффмана (мини‑пример)</strong></p>
              <p><em>Условие:</em> p(A,B,C,D) = (0.4, 0.2, 0.2, 0.2). Построить коды.</p>
              <p><em>Решение (один из вариантов):</em> слить три по 0.2 последовательно; можно получить A→0, B→10, C→110, D→111. <span class="note">Коды Хаффмана не единственны, но <span class="formula">L_{avg}</span> минимальна среди префиксных бин. кодов.</span></p>
            </li>
          </ol>
        </section>

        <section id="quiz" class="card">
          <h2>Мини‑викторина</h2>
          <ul>
            <li>Что такое префиксный код? → Ни одно слово не является префиксом другого.</li>
            <li>Зачем нужны неравномерные коды? → Сократить среднюю длину при неравных вероятностях.</li>
            <li>Крафт‑сумма для длин (1,2,3,3) равна? → 1.</li>
            <li>Равномерный код для N=20 символов имеет длину? → 5 бит.</li>
            <li>Как декодировать поток в префиксном коде? → Идти по дереву до листа.</li>
          </ul>
        </section>

        <section id="summary" class="card">
          <h2>Конспект (коротко)</h2>
          <ul>
            <li><strong>Равномерный</strong>: <span class="formula">m = ⌈log<sub>2</sub> N⌉</span> бит/символ.</li>
            <li><strong>Неравномерный</strong>: переменные длины; эффективен при разных вероятностях.</li>
            <li><strong>Префиксный</strong>: мгновенная декодируемость; проверка префикса.</li>
            <li><strong>Крафт—Макмиллан</strong>: <span class="formula">\(\sum 2^{-l_i} \le 1\)</span> — существование префиксного кода.</li>
            <li><strong>Средняя длина</strong>: <span class="formula">L_{avg} = \sum p_i l_i</span>, для Хаффмана близка к энтропии.</li>
          </ul>
        </section>

        <section id="homework" class="card">
          <h2>Домашнее задание (самопроверка)</h2>
          <ol>
            <li>
              <p><strong>Задача A</strong>: N=64, длина текста 300. Найти объём (равномерный).</p>
              <p><em>Ответ:</em> m=6; I=300×6=1800 бит = 225 B.</p>
            </li>
            <li>
              <p><strong>Задача B</strong>: Длины (1,2,3,3,4). Выполнима ли Крафт‑сумма?</p>
              <p><em>Решение:</em> 1/2+1/4+1/8+1/8+1/16=1.0625 &gt; 1 → нет префиксного кода.</p>
            </li>
            <li>
              <p><strong>Задача C</strong>: Декодировать <code>0110110111</code> при словаре A→0, B→10, C→110, D→111.</p>
              <p><em>Ответ:</em> A C B C D.</p>
            </li>
          </ol>
        </section>

        <section id="visuals" class="card">
          <h2>Визуальные подсказки</h2>
          <ul>
            <li><strong>Дерево кода</strong> с листами A,B,C,D.</li>
            <li><strong>Таблица префиксности</strong>: примеры допустимых/недопустимых наборов.</li>
            <li><strong>Гистограмма частот</strong> → короткие/длинные коды.</li>
          </ul>
        </section>
      </main>

      <footer>
        Подготовлено для урока «Кодирование и декодирование текстов» · Печать: Ctrl/Cmd + P
      </footer>
    </div>
    <script>
      (function() {
        var THEME_KEY = 'lesson_theme';
        var root = document.documentElement;
        var themeToggle = null;
        var printBtn = null;

        function applyTheme(theme) {
          root.setAttribute('data-theme', theme);
          if (themeToggle) {
            var isLight = theme === 'light';
            themeToggle.textContent = isLight ? 'Тёмная тема' : 'Светлая тема';
            themeToggle.setAttribute('aria-pressed', String(isLight));
            themeToggle.title = isLight ? 'Переключить на тёмную тему' : 'Переключить на светлую тему';
          }
          try { localStorage.setItem(THEME_KEY, theme); } catch (e) {}
        }

        function initTheme() {
          var stored = null;
          try { stored = localStorage.getItem(THEME_KEY); } catch (e) {}
          var prefersLight = false;
          try { prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches; } catch (e) {}
          var theme = stored || (prefersLight ? 'light' : 'dark');
          applyTheme(theme);
        }

        function toggleTheme() {
          var current = root.getAttribute('data-theme') || 'dark';
          var next = current === 'light' ? 'dark' : 'light';
          applyTheme(next);
        }

        function init() {
          themeToggle = document.getElementById('themeToggle');
          printBtn = document.getElementById('printBtn');
          initTheme();
          if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
          if (printBtn) printBtn.addEventListener('click', function() { window.print(); });
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', init);
        } else {
          init();
        }
      })();
    </script>
  </body>
  </html>


